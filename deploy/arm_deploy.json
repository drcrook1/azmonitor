{
    "type": "Microsoft.Resources/deploymentScripts",
    "apiVersion": "2019-10-01-preview",
    "name": "runPowerShellInline",
    "location": "[resourceGroup().location]",
    "kind": "AzurePowerShell",
    "identity": {
      "type": "userAssigned",
      "userAssignedIdentities": {
        "/subscriptions/01234567-89AB-CDEF-0123-456789ABCDEF/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/myID": {}
      }
    },
    "properties": {
      "forceUpdateTag": 1,
      "containerSettings": {
        "containerGroupName": "mycustomaci"
      },
      "storageAccountSettings": {
        "storageAccountName": "myStorageAccount",
        "storageAccountKey": "myKey"
      },
      "azPowerShellVersion": "3.0",
      "arguments": "-name \\\"John Dole\\\"",
      "environmentVariables": [
        {
          "name": "someSecret",
          "secureValue": "if this is really a secret, don't put it here... in plain text..."
        }
      ],
      "primaryScriptUri": "https://raw.githubusercontent.com/drcrook1/azmonitor/master/deploy/post_deploy.ps1",
      "supportingScriptUris":[],
      "timeout": "PT30M",
      "cleanupPreference": "OnSuccess",
      "retentionInterval": "P1D"
    }
  }